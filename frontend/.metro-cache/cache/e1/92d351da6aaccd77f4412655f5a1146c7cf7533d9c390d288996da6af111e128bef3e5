{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../api/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":38,"index":187}}],"key":"utPClfis1dUaKYKGIsVatI+t5kc=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _apiAuth = require(_dependencyMap[2], \"../api/auth\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuthState();\n    }, []);\n    const checkAuthState = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (token) {\n          const userData = await _apiAuth.authApi.getCurrentUser();\n          setUser(userData.user);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('authToken');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _apiAuth.authApi.login({\n          email,\n          password\n        });\n        await AsyncStorage.default.setItem('authToken', response.access_token);\n        setUser(response.user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async userData => {\n      try {\n        const response = await _apiAuth.authApi.register(userData);\n        await AsyncStorage.default.setItem('authToken', response.access_token);\n        setUser(response.user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('authToken');\n        setUser(null);\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    const toggleRole = async () => {\n      try {\n        const response = await _apiAuth.authApi.toggleRole();\n        if (user) {\n          setUser({\n            ...user,\n            is_rider: response.is_rider,\n            is_passenger: !response.is_rider || user.is_passenger\n          });\n        }\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Role toggle failed');\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        toggleRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":118,"map":[[15,2,32,0,"exports"],[15,9,32,0],[15,10,32,0,"AuthProvider"],[15,22,32,0],[15,25,32,0,"AuthProvider"],[15,37,32,0],[16,2,120,0,"exports"],[16,9,120,0],[16,10,120,0,"useAuth"],[16,17,120,0],[16,20,120,0,"useAuth"],[16,27,120,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_apiAuth"],[20,14,3,0],[20,17,3,0,"require"],[20,24,3,0],[20,25,3,0,"_dependencyMap"],[20,39,3,0],[21,2,3,38],[21,6,3,38,"_reactJsxDevRuntime"],[21,25,3,38],[21,28,3,38,"require"],[21,35,3,38],[21,36,3,38,"_dependencyMap"],[21,50,3,38],[22,2,30,0],[22,8,30,6,"AuthContext"],[22,19,30,17],[22,35,30,20],[22,39,30,20,"createContext"],[22,45,30,33],[22,46,30,33,"createContext"],[22,59,30,33],[22,61,30,63,"undefined"],[22,70,30,72],[22,71,30,73],[23,2,32,7],[23,11,32,16,"AuthProvider"],[23,23,32,28,"AuthProvider"],[23,24,32,29],[24,4,32,31,"children"],[25,2,32,71],[25,3,32,72],[25,5,32,74],[26,4,32,74,"_s"],[26,6,32,74],[27,4,33,2],[27,10,33,8],[27,11,33,9,"user"],[27,15,33,13],[27,17,33,15,"setUser"],[27,24,33,22],[27,25,33,23],[27,28,33,26],[27,32,33,26,"useState"],[27,38,33,34],[27,39,33,34,"useState"],[27,47,33,34],[27,49,33,48],[27,53,33,52],[27,54,33,53],[28,4,34,2],[28,10,34,8],[28,11,34,9,"loading"],[28,18,34,16],[28,20,34,18,"setLoading"],[28,30,34,28],[28,31,34,29],[28,34,34,32],[28,38,34,32,"useState"],[28,44,34,40],[28,45,34,40,"useState"],[28,53,34,40],[28,55,34,41],[28,59,34,45],[28,60,34,46],[29,4,36,2],[29,8,36,2,"useEffect"],[29,14,36,11],[29,15,36,11,"useEffect"],[29,24,36,11],[29,26,36,12],[29,32,36,18],[30,6,37,4,"checkAuthState"],[30,20,37,18],[30,21,37,19],[30,22,37,20],[31,4,38,2],[31,5,38,3],[31,7,38,5],[31,9,38,7],[31,10,38,8],[32,4,40,2],[32,10,40,8,"checkAuthState"],[32,24,40,22],[32,27,40,25],[32,33,40,25,"checkAuthState"],[32,34,40,25],[32,39,40,37],[33,6,41,4],[33,10,41,8],[34,8,42,6],[34,14,42,12,"token"],[34,19,42,17],[34,22,42,20],[34,28,42,26,"AsyncStorage"],[34,40,42,38],[34,41,42,38,"default"],[34,48,42,38],[34,49,42,39,"getItem"],[34,56,42,46],[34,57,42,47],[34,68,42,58],[34,69,42,59],[35,8,43,6],[35,12,43,10,"token"],[35,17,43,15],[35,19,43,17],[36,10,44,8],[36,16,44,14,"userData"],[36,24,44,22],[36,27,44,25],[36,33,44,31,"authApi"],[36,41,44,38],[36,42,44,38,"authApi"],[36,49,44,38],[36,50,44,39,"getCurrentUser"],[36,64,44,53],[36,65,44,54],[36,66,44,55],[37,10,45,8,"setUser"],[37,17,45,15],[37,18,45,16,"userData"],[37,26,45,24],[37,27,45,25,"user"],[37,31,45,29],[37,32,45,30],[38,8,46,6],[39,6,47,4],[39,7,47,5],[39,8,47,6],[39,15,47,13,"error"],[39,20,47,18],[39,22,47,20],[40,8,48,6,"console"],[40,15,48,13],[40,16,48,14,"error"],[40,21,48,19],[40,22,48,20],[40,42,48,40],[40,44,48,42,"error"],[40,49,48,47],[40,50,48,48],[41,8,49,6],[41,14,49,12,"AsyncStorage"],[41,26,49,24],[41,27,49,24,"default"],[41,34,49,24],[41,35,49,25,"removeItem"],[41,45,49,35],[41,46,49,36],[41,57,49,47],[41,58,49,48],[42,6,50,4],[42,7,50,5],[42,16,50,14],[43,8,51,6,"setLoading"],[43,18,51,16],[43,19,51,17],[43,24,51,22],[43,25,51,23],[44,6,52,4],[45,4,53,2],[45,5,53,3],[46,4,55,2],[46,10,55,8,"login"],[46,15,55,13],[46,18,55,16],[46,24,55,16,"login"],[46,25,55,23,"email"],[46,30,55,36],[46,32,55,38,"password"],[46,40,55,54],[46,45,55,59],[47,6,56,4],[47,10,56,8],[48,8,57,6],[48,14,57,12,"response"],[48,22,57,20],[48,25,57,23],[48,31,57,29,"authApi"],[48,39,57,36],[48,40,57,36,"authApi"],[48,47,57,36],[48,48,57,37,"login"],[48,53,57,42],[48,54,57,43],[49,10,57,45,"email"],[49,15,57,50],[50,10,57,52,"password"],[51,8,57,61],[51,9,57,62],[51,10,57,63],[52,8,58,6],[52,14,58,12,"AsyncStorage"],[52,26,58,24],[52,27,58,24,"default"],[52,34,58,24],[52,35,58,25,"setItem"],[52,42,58,32],[52,43,58,33],[52,54,58,44],[52,56,58,46,"response"],[52,64,58,54],[52,65,58,55,"access_token"],[52,77,58,67],[52,78,58,68],[53,8,59,6,"setUser"],[53,15,59,13],[53,16,59,14,"response"],[53,24,59,22],[53,25,59,23,"user"],[53,29,59,27],[53,30,59,28],[54,6,60,4],[54,7,60,5],[54,8,60,6],[54,15,60,13,"error"],[54,20,60,23],[54,22,60,25],[55,8,61,6],[55,14,61,12],[55,18,61,16,"Error"],[55,23,61,21],[55,24,61,22,"error"],[55,29,61,27],[55,30,61,28,"response"],[55,38,61,36],[55,40,61,38,"data"],[55,44,61,42],[55,46,61,44,"detail"],[55,52,61,50],[55,56,61,54],[55,70,61,68],[55,71,61,69],[56,6,62,4],[57,4,63,2],[57,5,63,3],[58,4,65,2],[58,10,65,8,"register"],[58,18,65,16],[58,21,65,19],[58,27,65,26,"userData"],[58,35,70,3],[58,39,70,8],[59,6,71,4],[59,10,71,8],[60,8,72,6],[60,14,72,12,"response"],[60,22,72,20],[60,25,72,23],[60,31,72,29,"authApi"],[60,39,72,36],[60,40,72,36,"authApi"],[60,47,72,36],[60,48,72,37,"register"],[60,56,72,45],[60,57,72,46,"userData"],[60,65,72,54],[60,66,72,55],[61,8,73,6],[61,14,73,12,"AsyncStorage"],[61,26,73,24],[61,27,73,24,"default"],[61,34,73,24],[61,35,73,25,"setItem"],[61,42,73,32],[61,43,73,33],[61,54,73,44],[61,56,73,46,"response"],[61,64,73,54],[61,65,73,55,"access_token"],[61,77,73,67],[61,78,73,68],[62,8,74,6,"setUser"],[62,15,74,13],[62,16,74,14,"response"],[62,24,74,22],[62,25,74,23,"user"],[62,29,74,27],[62,30,74,28],[63,6,75,4],[63,7,75,5],[63,8,75,6],[63,15,75,13,"error"],[63,20,75,23],[63,22,75,25],[64,8,76,6],[64,14,76,12],[64,18,76,16,"Error"],[64,23,76,21],[64,24,76,22,"error"],[64,29,76,27],[64,30,76,28,"response"],[64,38,76,36],[64,40,76,38,"data"],[64,44,76,42],[64,46,76,44,"detail"],[64,52,76,50],[64,56,76,54],[64,77,76,75],[64,78,76,76],[65,6,77,4],[66,4,78,2],[66,5,78,3],[67,4,80,2],[67,10,80,8,"logout"],[67,16,80,14],[67,19,80,17],[67,25,80,17,"logout"],[67,26,80,17],[67,31,80,29],[68,6,81,4],[68,10,81,8],[69,8,82,6],[69,14,82,12,"AsyncStorage"],[69,26,82,24],[69,27,82,24,"default"],[69,34,82,24],[69,35,82,25,"removeItem"],[69,45,82,35],[69,46,82,36],[69,57,82,47],[69,58,82,48],[70,8,83,6,"setUser"],[70,15,83,13],[70,16,83,14],[70,20,83,18],[70,21,83,19],[71,6,84,4],[71,7,84,5],[71,8,84,6],[71,15,84,13,"error"],[71,20,84,18],[71,22,84,20],[72,8,85,6,"console"],[72,15,85,13],[72,16,85,14,"error"],[72,21,85,19],[72,22,85,20],[72,38,85,36],[72,40,85,38,"error"],[72,45,85,43],[72,46,85,44],[73,6,86,4],[74,4,87,2],[74,5,87,3],[75,4,89,2],[75,10,89,8,"toggleRole"],[75,20,89,18],[75,23,89,21],[75,29,89,21,"toggleRole"],[75,30,89,21],[75,35,89,33],[76,6,90,4],[76,10,90,8],[77,8,91,6],[77,14,91,12,"response"],[77,22,91,20],[77,25,91,23],[77,31,91,29,"authApi"],[77,39,91,36],[77,40,91,36,"authApi"],[77,47,91,36],[77,48,91,37,"toggleRole"],[77,58,91,47],[77,59,91,48],[77,60,91,49],[78,8,92,6],[78,12,92,10,"user"],[78,16,92,14],[78,18,92,16],[79,10,93,8,"setUser"],[79,17,93,15],[79,18,93,16],[80,12,94,10],[80,15,94,13,"user"],[80,19,94,17],[81,12,95,10,"is_rider"],[81,20,95,18],[81,22,95,20,"response"],[81,30,95,28],[81,31,95,29,"is_rider"],[81,39,95,37],[82,12,96,10,"is_passenger"],[82,24,96,22],[82,26,96,24],[82,27,96,25,"response"],[82,35,96,33],[82,36,96,34,"is_rider"],[82,44,96,42],[82,48,96,46,"user"],[82,52,96,50],[82,53,96,51,"is_passenger"],[83,10,97,8],[83,11,97,9],[83,12,97,10],[84,8,98,6],[85,6,99,4],[85,7,99,5],[85,8,99,6],[85,15,99,13,"error"],[85,20,99,23],[85,22,99,25],[86,8,100,6],[86,14,100,12],[86,18,100,16,"Error"],[86,23,100,21],[86,24,100,22,"error"],[86,29,100,27],[86,30,100,28,"response"],[86,38,100,36],[86,40,100,38,"data"],[86,44,100,42],[86,46,100,44,"detail"],[86,52,100,50],[86,56,100,54],[86,76,100,74],[86,77,100,75],[87,6,101,4],[88,4,102,2],[88,5,102,3],[89,4,104,2],[89,24,105,4],[89,28,105,4,"_reactJsxDevRuntime"],[89,47,105,4],[89,48,105,4,"jsxDEV"],[89,54,105,4],[89,56,105,5,"AuthContext"],[89,67,105,16],[89,68,105,17,"Provider"],[89,76,105,25],[90,6,106,6,"value"],[90,11,106,11],[90,13,106,13],[91,8,107,8,"user"],[91,12,107,12],[92,8,108,8,"loading"],[92,15,108,15],[93,8,109,8,"login"],[93,13,109,13],[94,8,110,8,"register"],[94,16,110,16],[95,8,111,8,"logout"],[95,14,111,14],[96,8,112,8,"toggleRole"],[97,6,113,6],[97,7,113,8],[98,6,113,8,"children"],[98,14,113,8],[98,16,115,7,"children"],[99,4,115,15],[100,6,115,15,"fileName"],[100,14,115,15],[100,16,115,15,"_jsxFileName"],[100,28,115,15],[101,6,115,15,"lineNumber"],[101,16,115,15],[102,6,115,15,"columnNumber"],[102,18,115,15],[103,4,115,15],[103,11,116,26],[103,12,116,27],[104,2,118,0],[105,2,118,1,"_s"],[105,4,118,1],[105,5,32,16,"AuthProvider"],[105,17,32,28],[106,2,32,28,"_c"],[106,4,32,28],[106,7,32,16,"AuthProvider"],[106,19,32,28],[107,2,120,7],[107,11,120,16,"useAuth"],[107,18,120,23,"useAuth"],[107,19,120,23],[107,21,120,26],[108,4,120,26,"_s2"],[108,7,120,26],[109,4,121,2],[109,10,121,8,"context"],[109,17,121,15],[109,20,121,18],[109,24,121,18,"useContext"],[109,30,121,28],[109,31,121,28,"useContext"],[109,41,121,28],[109,43,121,29,"AuthContext"],[109,54,121,40],[109,55,121,41],[110,4,122,2],[110,8,122,6,"context"],[110,15,122,13],[110,20,122,18,"undefined"],[110,29,122,27],[110,31,122,29],[111,6,123,4],[111,12,123,10],[111,16,123,14,"Error"],[111,21,123,19],[111,22,123,20],[111,67,123,65],[111,68,123,66],[112,4,124,2],[113,4,125,2],[113,11,125,9,"context"],[113,18,125,16],[114,2,126,0],[115,2,126,1,"_s2"],[115,5,126,1],[115,6,120,16,"useAuth"],[115,13,120,23],[116,2,120,23],[116,6,120,23,"_c"],[116,8,120,23],[117,2,120,23,"$RefreshReg$"],[117,14,120,23],[117,15,120,23,"_c"],[117,17,120,23],[118,0,120,23],[118,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthState","login","register","logout","toggleRole","useAuth"],"mappings":"AAA;OC+B;YCI;GDE;yBEE;GFa;gBGE;GHQ;mBIE;GJa;iBKE;GLO;qBME;GNa;CDgB;OQE"},"hasCjsExports":false},"type":"js/module"}]}