{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../api/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":38,"index":187}}],"key":"utPClfis1dUaKYKGIsVatI+t5kc=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _apiAuth = require(_dependencyMap[2], \"../api/auth\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuthState();\n    }, []);\n    const checkAuthState = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n        if (token) {\n          const userData = await _apiAuth.authApi.getCurrentUser();\n          setUser(userData.user);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('authToken');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _apiAuth.authApi.login({\n          email,\n          password\n        });\n        await AsyncStorage.default.setItem('authToken', response.access_token);\n        setUser(response.user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async userData => {\n      try {\n        const response = await _apiAuth.authApi.register(userData);\n        await AsyncStorage.default.setItem('authToken', response.access_token);\n        setUser(response.user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('authToken');\n        setUser(null);\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    const toggleRole = async () => {\n      try {\n        const response = await _apiAuth.authApi.toggleRole();\n        if (user) {\n          setUser({\n            ...user,\n            is_rider: response.is_rider,\n            is_passenger: !response.is_rider || user.is_passenger\n          });\n        }\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Role toggle failed');\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        toggleRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":109,"map":[[13,2,32,0,"exports"],[13,9,32,0],[13,10,32,0,"AuthProvider"],[13,22,32,0],[13,25,32,0,"AuthProvider"],[13,37,32,0],[14,2,120,0,"exports"],[14,9,120,0],[14,10,120,0,"useAuth"],[14,17,120,0],[14,20,120,0,"useAuth"],[14,27,120,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_apiAuth"],[18,14,3,0],[18,17,3,0,"require"],[18,24,3,0],[18,25,3,0,"_dependencyMap"],[18,39,3,0],[19,2,3,38],[19,6,3,38,"_reactJsxDevRuntime"],[19,25,3,38],[19,28,3,38,"require"],[19,35,3,38],[19,36,3,38,"_dependencyMap"],[19,50,3,38],[20,2,30,0],[20,8,30,6,"AuthContext"],[20,19,30,17],[20,35,30,20],[20,39,30,20,"createContext"],[20,45,30,33],[20,46,30,33,"createContext"],[20,59,30,33],[20,61,30,63,"undefined"],[20,70,30,72],[20,71,30,73],[21,2,32,7],[21,11,32,16,"AuthProvider"],[21,23,32,28,"AuthProvider"],[21,24,32,29],[22,4,32,31,"children"],[23,2,32,71],[23,3,32,72],[23,5,32,74],[24,4,33,2],[24,10,33,8],[24,11,33,9,"user"],[24,15,33,13],[24,17,33,15,"setUser"],[24,24,33,22],[24,25,33,23],[24,28,33,26],[24,32,33,26,"useState"],[24,38,33,34],[24,39,33,34,"useState"],[24,47,33,34],[24,49,33,48],[24,53,33,52],[24,54,33,53],[25,4,34,2],[25,10,34,8],[25,11,34,9,"loading"],[25,18,34,16],[25,20,34,18,"setLoading"],[25,30,34,28],[25,31,34,29],[25,34,34,32],[25,38,34,32,"useState"],[25,44,34,40],[25,45,34,40,"useState"],[25,53,34,40],[25,55,34,41],[25,59,34,45],[25,60,34,46],[26,4,36,2],[26,8,36,2,"useEffect"],[26,14,36,11],[26,15,36,11,"useEffect"],[26,24,36,11],[26,26,36,12],[26,32,36,18],[27,6,37,4,"checkAuthState"],[27,20,37,18],[27,21,37,19],[27,22,37,20],[28,4,38,2],[28,5,38,3],[28,7,38,5],[28,9,38,7],[28,10,38,8],[29,4,40,2],[29,10,40,8,"checkAuthState"],[29,24,40,22],[29,27,40,25],[29,33,40,25,"checkAuthState"],[29,34,40,25],[29,39,40,37],[30,6,41,4],[30,10,41,8],[31,8,42,6],[31,14,42,12,"token"],[31,19,42,17],[31,22,42,20],[31,28,42,26,"AsyncStorage"],[31,40,42,38],[31,41,42,38,"default"],[31,48,42,38],[31,49,42,39,"getItem"],[31,56,42,46],[31,57,42,47],[31,68,42,58],[31,69,42,59],[32,8,43,6],[32,12,43,10,"token"],[32,17,43,15],[32,19,43,17],[33,10,44,8],[33,16,44,14,"userData"],[33,24,44,22],[33,27,44,25],[33,33,44,31,"authApi"],[33,41,44,38],[33,42,44,38,"authApi"],[33,49,44,38],[33,50,44,39,"getCurrentUser"],[33,64,44,53],[33,65,44,54],[33,66,44,55],[34,10,45,8,"setUser"],[34,17,45,15],[34,18,45,16,"userData"],[34,26,45,24],[34,27,45,25,"user"],[34,31,45,29],[34,32,45,30],[35,8,46,6],[36,6,47,4],[36,7,47,5],[36,8,47,6],[36,15,47,13,"error"],[36,20,47,18],[36,22,47,20],[37,8,48,6,"console"],[37,15,48,13],[37,16,48,14,"error"],[37,21,48,19],[37,22,48,20],[37,42,48,40],[37,44,48,42,"error"],[37,49,48,47],[37,50,48,48],[38,8,49,6],[38,14,49,12,"AsyncStorage"],[38,26,49,24],[38,27,49,24,"default"],[38,34,49,24],[38,35,49,25,"removeItem"],[38,45,49,35],[38,46,49,36],[38,57,49,47],[38,58,49,48],[39,6,50,4],[39,7,50,5],[39,16,50,14],[40,8,51,6,"setLoading"],[40,18,51,16],[40,19,51,17],[40,24,51,22],[40,25,51,23],[41,6,52,4],[42,4,53,2],[42,5,53,3],[43,4,55,2],[43,10,55,8,"login"],[43,15,55,13],[43,18,55,16],[43,24,55,16,"login"],[43,25,55,23,"email"],[43,30,55,36],[43,32,55,38,"password"],[43,40,55,54],[43,45,55,59],[44,6,56,4],[44,10,56,8],[45,8,57,6],[45,14,57,12,"response"],[45,22,57,20],[45,25,57,23],[45,31,57,29,"authApi"],[45,39,57,36],[45,40,57,36,"authApi"],[45,47,57,36],[45,48,57,37,"login"],[45,53,57,42],[45,54,57,43],[46,10,57,45,"email"],[46,15,57,50],[47,10,57,52,"password"],[48,8,57,61],[48,9,57,62],[48,10,57,63],[49,8,58,6],[49,14,58,12,"AsyncStorage"],[49,26,58,24],[49,27,58,24,"default"],[49,34,58,24],[49,35,58,25,"setItem"],[49,42,58,32],[49,43,58,33],[49,54,58,44],[49,56,58,46,"response"],[49,64,58,54],[49,65,58,55,"access_token"],[49,77,58,67],[49,78,58,68],[50,8,59,6,"setUser"],[50,15,59,13],[50,16,59,14,"response"],[50,24,59,22],[50,25,59,23,"user"],[50,29,59,27],[50,30,59,28],[51,6,60,4],[51,7,60,5],[51,8,60,6],[51,15,60,13,"error"],[51,20,60,23],[51,22,60,25],[52,8,61,6],[52,14,61,12],[52,18,61,16,"Error"],[52,23,61,21],[52,24,61,22,"error"],[52,29,61,27],[52,30,61,28,"response"],[52,38,61,36],[52,40,61,38,"data"],[52,44,61,42],[52,46,61,44,"detail"],[52,52,61,50],[52,56,61,54],[52,70,61,68],[52,71,61,69],[53,6,62,4],[54,4,63,2],[54,5,63,3],[55,4,65,2],[55,10,65,8,"register"],[55,18,65,16],[55,21,65,19],[55,27,65,26,"userData"],[55,35,70,3],[55,39,70,8],[56,6,71,4],[56,10,71,8],[57,8,72,6],[57,14,72,12,"response"],[57,22,72,20],[57,25,72,23],[57,31,72,29,"authApi"],[57,39,72,36],[57,40,72,36,"authApi"],[57,47,72,36],[57,48,72,37,"register"],[57,56,72,45],[57,57,72,46,"userData"],[57,65,72,54],[57,66,72,55],[58,8,73,6],[58,14,73,12,"AsyncStorage"],[58,26,73,24],[58,27,73,24,"default"],[58,34,73,24],[58,35,73,25,"setItem"],[58,42,73,32],[58,43,73,33],[58,54,73,44],[58,56,73,46,"response"],[58,64,73,54],[58,65,73,55,"access_token"],[58,77,73,67],[58,78,73,68],[59,8,74,6,"setUser"],[59,15,74,13],[59,16,74,14,"response"],[59,24,74,22],[59,25,74,23,"user"],[59,29,74,27],[59,30,74,28],[60,6,75,4],[60,7,75,5],[60,8,75,6],[60,15,75,13,"error"],[60,20,75,23],[60,22,75,25],[61,8,76,6],[61,14,76,12],[61,18,76,16,"Error"],[61,23,76,21],[61,24,76,22,"error"],[61,29,76,27],[61,30,76,28,"response"],[61,38,76,36],[61,40,76,38,"data"],[61,44,76,42],[61,46,76,44,"detail"],[61,52,76,50],[61,56,76,54],[61,77,76,75],[61,78,76,76],[62,6,77,4],[63,4,78,2],[63,5,78,3],[64,4,80,2],[64,10,80,8,"logout"],[64,16,80,14],[64,19,80,17],[64,25,80,17,"logout"],[64,26,80,17],[64,31,80,29],[65,6,81,4],[65,10,81,8],[66,8,82,6],[66,14,82,12,"AsyncStorage"],[66,26,82,24],[66,27,82,24,"default"],[66,34,82,24],[66,35,82,25,"removeItem"],[66,45,82,35],[66,46,82,36],[66,57,82,47],[66,58,82,48],[67,8,83,6,"setUser"],[67,15,83,13],[67,16,83,14],[67,20,83,18],[67,21,83,19],[68,6,84,4],[68,7,84,5],[68,8,84,6],[68,15,84,13,"error"],[68,20,84,18],[68,22,84,20],[69,8,85,6,"console"],[69,15,85,13],[69,16,85,14,"error"],[69,21,85,19],[69,22,85,20],[69,38,85,36],[69,40,85,38,"error"],[69,45,85,43],[69,46,85,44],[70,6,86,4],[71,4,87,2],[71,5,87,3],[72,4,89,2],[72,10,89,8,"toggleRole"],[72,20,89,18],[72,23,89,21],[72,29,89,21,"toggleRole"],[72,30,89,21],[72,35,89,33],[73,6,90,4],[73,10,90,8],[74,8,91,6],[74,14,91,12,"response"],[74,22,91,20],[74,25,91,23],[74,31,91,29,"authApi"],[74,39,91,36],[74,40,91,36,"authApi"],[74,47,91,36],[74,48,91,37,"toggleRole"],[74,58,91,47],[74,59,91,48],[74,60,91,49],[75,8,92,6],[75,12,92,10,"user"],[75,16,92,14],[75,18,92,16],[76,10,93,8,"setUser"],[76,17,93,15],[76,18,93,16],[77,12,94,10],[77,15,94,13,"user"],[77,19,94,17],[78,12,95,10,"is_rider"],[78,20,95,18],[78,22,95,20,"response"],[78,30,95,28],[78,31,95,29,"is_rider"],[78,39,95,37],[79,12,96,10,"is_passenger"],[79,24,96,22],[79,26,96,24],[79,27,96,25,"response"],[79,35,96,33],[79,36,96,34,"is_rider"],[79,44,96,42],[79,48,96,46,"user"],[79,52,96,50],[79,53,96,51,"is_passenger"],[80,10,97,8],[80,11,97,9],[80,12,97,10],[81,8,98,6],[82,6,99,4],[82,7,99,5],[82,8,99,6],[82,15,99,13,"error"],[82,20,99,23],[82,22,99,25],[83,8,100,6],[83,14,100,12],[83,18,100,16,"Error"],[83,23,100,21],[83,24,100,22,"error"],[83,29,100,27],[83,30,100,28,"response"],[83,38,100,36],[83,40,100,38,"data"],[83,44,100,42],[83,46,100,44,"detail"],[83,52,100,50],[83,56,100,54],[83,76,100,74],[83,77,100,75],[84,6,101,4],[85,4,102,2],[85,5,102,3],[86,4,104,2],[86,24,105,4],[86,28,105,4,"_reactJsxDevRuntime"],[86,47,105,4],[86,48,105,4,"jsxDEV"],[86,54,105,4],[86,56,105,5,"AuthContext"],[86,67,105,16],[86,68,105,17,"Provider"],[86,76,105,25],[87,6,106,6,"value"],[87,11,106,11],[87,13,106,13],[88,8,107,8,"user"],[88,12,107,12],[89,8,108,8,"loading"],[89,15,108,15],[90,8,109,8,"login"],[90,13,109,13],[91,8,110,8,"register"],[91,16,110,16],[92,8,111,8,"logout"],[92,14,111,14],[93,8,112,8,"toggleRole"],[94,6,113,6],[94,7,113,8],[95,6,113,8,"children"],[95,14,113,8],[95,16,115,7,"children"],[96,4,115,15],[97,6,115,15,"fileName"],[97,14,115,15],[97,16,115,15,"_jsxFileName"],[97,28,115,15],[98,6,115,15,"lineNumber"],[98,16,115,15],[99,6,115,15,"columnNumber"],[99,18,115,15],[100,4,115,15],[100,11,116,26],[100,12,116,27],[101,2,118,0],[102,2,120,7],[102,11,120,16,"useAuth"],[102,18,120,23,"useAuth"],[102,19,120,23],[102,21,120,26],[103,4,121,2],[103,10,121,8,"context"],[103,17,121,15],[103,20,121,18],[103,24,121,18,"useContext"],[103,30,121,28],[103,31,121,28,"useContext"],[103,41,121,28],[103,43,121,29,"AuthContext"],[103,54,121,40],[103,55,121,41],[104,4,122,2],[104,8,122,6,"context"],[104,15,122,13],[104,20,122,18,"undefined"],[104,29,122,27],[104,31,122,29],[105,6,123,4],[105,12,123,10],[105,16,123,14,"Error"],[105,21,123,19],[105,22,123,20],[105,67,123,65],[105,68,123,66],[106,4,124,2],[107,4,125,2],[107,11,125,9,"context"],[107,18,125,16],[108,2,126,0],[109,0,126,1],[109,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthState","login","register","logout","toggleRole","useAuth"],"mappings":"AAA;OC+B;YCI;GDE;yBEE;GFa;gBGE;GHQ;mBIE;GJa;iBKE;GLO;qBME;GNa;CDgB;OQE"},"hasCjsExports":false},"type":"js/module"}]}